description: >
  This command connects the WireGuard client to the WireGuard server.

parameters:
  wg-server-ip:
    description: Private IP address (i.e, in the WireGuard network) of the WireGuard server.
    type: string
    default: "10.0.0.1"
  timeout:
    description: Maximum allocated time (in seconds) to establish the connection with the WireGuard server.
    type: integer
    default: 5

steps:
  - run:
      shell: bash
      environment:
        CLIENT_CONFIG: << parameters.wg-client-config-var >>
        WG_SERVER_IP: << parameters.wg-server-ip >>
        TIMEOUT: << parameters.timeout >>
      name: Connecting to WireGuard server
      command: <<include(scripts/connect.sh)>>
